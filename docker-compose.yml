services:
  backend:
    build:
      context: ./backend
    working_dir: /src
    volumes:
      - ./backend:/src
    command: poetry run fastapi dev app/main.py --host 0.0.0.0 --port 5000
    ports:
      - 5000:5000

  chromadb:
    image: chromadb/chroma
    environment:
      - IS_PERSISTENT=TRUE
    volumes:
      # Default configuration for persist_directory in chromadb/config.py
      # Currently it's located in "/chroma/chroma/"
      - ./chroma-data:/chroma/chroma/
    ports:
      - 8000:8000